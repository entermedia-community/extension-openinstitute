##Exising ones 
##No existing programs found.
<div class="container" id="storeworkarea" style="padding:20px;">
#set( $searchtype = "collectiveinvoice")
#set( $searcher = $mediaarchive.getSearcher($searchtype) )
#set( $xmledithome  = "$apphome/components/xml")
$context.putPageValue("searcher",$searcher)
#ifnull( $aproduct)
	#set( $id  = $context.getRequestParameter("productid"))
	#set($aproduct = $mediaarchive.getData("collectiveproduct", $id))
#end
#set( $data = $searcher.createNewData())

$data.setValue("name","$user.getEmail() [[Reservation]]")

<form name="inlinesaveproject" 
		id="inlinesaveproject" 
		 action="/${librarycol.urlname}/rentaldetails/processinvoice.html"
		method="post"
		class="ajaxform"
			data-targetdiv="storeworkarea"
			data-oemaxlevel="1">
<input type="hidden" name="save" value="true" />
<input type="hidden" name="searchtype" value="${searchtype}" />

<input type="hidden" name="field" value="owner" />
<input type="hidden" name="owner.value" value="$user.getId()" />

<input type="hidden" name="field" value="collectionid" />
<input type="hidden" name="collectionid.value" value="$librarycol.getId()" />
<input type="hidden" name="collectionid" value="$librarycol.getId()" />

<input type="hidden" name="productid" value="$aproduct.id" />
<input type="hidden" name="productlist.add" value="$aproduct.id" />

<div style="padding-bottom:10px;">

#set( $duedate = $context.getRequestParameter("checkIn"))
<input type="hidden" name="duedate" value="$duedate" />

#set( $enddate = $context.getRequestParameter("checkOut"))
<input type="hidden" name="enddate" value="$enddate" />

$duedate - $enddate
 
##$pages.include("$communityhome/components/xml/types/daterange.html?daterange=01/01/2018 - 01/15/2018",$context)

</div>

<input type="hidden" name="field" value="name" />
<input type="hidden" name="name.value" value="$data.name" />

<p>[[New Reservation]]:<b> $user.getEmail()</b></p>

##if( !$caneditcollection)
	<input type="hidden" name="field" value="forcustomer" />
	<input type="hidden" name="forcustomer.value" value="$user.getId()" />
##end

#set( $searcher = $mediaarchive.getSearcher($searchtype) )
$context.putPageValue("searcher",$searcher)
#set( $producttype = $aproduct.producttype )
$context.putPageValue("view", "${searchtype}/invoiceadd${producttype}")
$context.putPageValue("data",$data)
$pages.include("/$applicationid/components/xml/detaileditor4.html", $context)

<input class="btn btn-primary" type="submit" value="[[Reserve]]" />
##Put js logic in here for handing sub-totals and filling on more details

</form>
</div>
