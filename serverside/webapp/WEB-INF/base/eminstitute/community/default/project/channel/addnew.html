##if( $caneditcollection )
#set( $searcher = $mediaarchive.getSearcher("userupload") )
$context.putPageValue("searcher",$searcher)
#set( $xmledithome  = "$apphome/components/xml")

<div class="modal-dialog modal-lg">
	<div class="modal-content">
		<div class="modal-header">
			<h5 class="modal-title" id="exampleModalLabel">[[Upload a File]]</h5>
			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		</div>
		<div class="modal-body">
			<div class="blog-form-container blog-shadow"> 
				<form id="blogForm"
					method="post"
					action="$projectlink/channel/upload.html"
					class="ajaxform feedupload d-flex flex-column">
					<div class="d-flex align-items-center">
						<div class="blog-form-avatar"> 
							$context.putPageValue("chatuser", $user)
							$pages.include("${communityhome}/users/icon.html",$context)
						</div>
						<input class="title-input uploadtitle" autocomplete="off" name="uploadtitle" id="uploadtitle" placeholder="[[Post Title]]" required />
					</div>
		
					<div class="my-2">
						<textarea name="uploaddescription" id="uploadpostdescription" cols="40" rows="5" class="htmleditor-advanced" data-editonly="true" data-imagepickerhidden="true"></textarea>
						<div class="text-right d-flex align-items-center justify-content-end my-1">
							<input class="form-check-input mt-0 me-1" type="checkbox" name="exclusivecontent"  id="exclusivecontent" value="true" /> 
							<label for="exclusivecontent" class="m-0 text-secondary small">
								[[Private Post]] ([[Team Only]])
							</label>
						</div>
					</div>
					$context.putPageValue("searcher",$mediaarchive.getAssetSearcher() )	
					#if( $librarycol)
						$context.putPageValue("viewid","assetmultipleuploadcollection")	
						#set( $collection = $mediaarchive.getData("librarycollection",$librarycol.getId()) )
						$!context.setRequestParameter("libraries.value",$librarycol.library)
						<input type="hidden" name="collectionid" id="currentcollection" value="$librarycol.getId()"/>
					#end
					<input type="hidden" name="sourcepath" id="customsourcepath" value="${librarycol.getCategory().getCategoryPath()}/${formatteddate}/" />
					<input type="hidden" name="skipasset" value="true" />
					
					
					<label for="urlname" class="form-label">[[Post URL]]</label> 
					<input class="form-control" autocomplete="off" name="urlname" id="urlname" placeholder="[[Post URL Slug]]" required />

					<label for="thumbnailPicker" class="form-label mt-3">[[Choose a Thumbnail]]</label>
					<div class="d-flex">
						<input class="form-control" id="thumbnailPicker" type="file" name="primarymedia" required>
						<button class="btn btn-danger ms-2" id="removeThumbnail" type="button" style="display:none;">
							<i class="fas fa-times me-1"></i>
							[[Remove]]
						</button>
					</div>
					<div id="thumbPreview"></div>
				</form> 
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn btn-primary btn-sm" form="blogForm" type="submit">[[Post]]</button>
			<button class="btn btn-secondary btn-sm cancel" data-bs-dismiss="modal">[[Cancel]]</button>
		</div>
	</div>
</div>
