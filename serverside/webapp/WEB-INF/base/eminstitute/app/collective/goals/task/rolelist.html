#set( $rolesarray = $task.getValues("taskroles") )

<div id="roleeditor" class="rolelist">
	##USE AJAX
	#foreach( $role in $rolesarray )
		#set($link = "$home$apphome/collective/goals/priorities/index.html?collectionid=$!collectionid&keyword=$val")
		#set($collectiverole = $mediaarchive.getCachedData("collectiverole",$role.collectiverole))
		#set($collectiveuser = $mediaarchive.getCachedData("user",$role.roleuserid))
		<div class="btn-group" role="group">
		<a href="$applink/collective/goals/task/editrole/editrole.html"
		
		 	data-taskid="$task.id" 
		 	data-collectiverole="$role.collectiverole"
		 	data-roleuserid="$role.roleuserid"
		
		 class="emdialog btn btn-sm btn-secondary">#text($collectiverole) ($!collectiveuser)</a>
		 
		 #if( $role.roleuserid )  ##default user
		 <a	class="btn btn-sm btn-secondary ajax" style="padding:.275rem .35rem"  
		 	data-targetdivinner="roleeditor" 
		 	data-taskid="$task.id" 
		 	data-collectiverole="$role.collectiverole"
		 	data-roleuserid="$role.roleuserid"
		 	href="$applink/collective/goals/task/rolelistaddone.html" 
		 	title="#esc($val)">#if($role.actioncount)($!role.actioncount)#end +</a>
		 #end	
		 </div> 
	#end
	<a class="addroletolist ajax" data-targetdivinner="roleeditor" data-taskid="$task.id" href="$applink/collective/goals/task/pickrole.html">+ add role</a>
</div>
