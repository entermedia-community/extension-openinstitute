#if(!$moduleid)
	#set($moduleid = $context.getRequestParameter("moduleid"))
#end
#if(!$entityid)
	#set($entityid = $context.getRequestParameter("entityid"))
#end

#if($assetshits)
	#set($count = 0)
	#set($stackedfield = $mediaarchive.getCatalogSettingValue("stackedgalleryfield"))
	
<div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel" >
  <div class="carousel-inner">
   
	#foreach( $hit in $assetshits.getPageOfHits())
		#set($count = $count + 1)
		$context.putPageValue("hit", $hit)
		#set($type = $hit.getSearchHit().getType())
		#set( $rendertype = $mediaarchive.getMediaRenderType($hit.fileformat))
		$context.putPageValue("type", $rendertype)
		
		$context.putPageValue("assetid", $hit.id)
		$context.putPageValue("sourcepath", $hit.sourcepath )
		
		#set($sourcepath = $hit.sourcepath)
		##set($click = "$siteroot$viewerlink?hitssessionid=${assetshits.getSessionId()}&assetid=${hit.id}")
		
	  	#if(!$rendertype || $type =="rendertype")
	 		#set( $rendertype = "mime" )
	 	#elseif( $rendertype =="video")
	 		#set( $rendertype = "videothumbnail" )
	 	#end
	 	
	 	#if($stackedfield)
		      	#set($title = $hit.get($stackedfield))
		#end
		#if(!$title)		         	
		  	#if( $hit.assettitle )
		      	#set($title =  $hit.assettitle) 
		    #else 
		      	#set($title = $hit.name) 
		    #end
		#end
	 	
	 	
	 	<div class="carousel-item active">
    	  	<div class="d-block w-100">
		 	<a class="stackedplayerX imageareaX" id="clickid${hit.id}" data-assetid="$hit.id" href="#" title="$!title">
		$context.putPageValue("thumbsize", "postsize" )
		$context.putPageValue("thumbsize", "mediumplus" )
			$pages.include("$componenthome/results/thumbnails/${rendertype}.html", $context)
			
			##<img class="d-block w-100"  src="/site/mediadb/services/module/librarycollection/downloads/preset/AYM3tVAf7npdKOYnFw--/Collections/collectives/Test%20project1/2022/294146216_10160030242422720_7785032566332458592_n.jpg/image730x480.jpg" />
			
			</a>
			</div>
		</div>
	
	#end
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
	
</div>

<div class="clearfix"></div>

#end
